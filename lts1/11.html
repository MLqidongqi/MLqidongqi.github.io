Â 
<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ“± 5.1ç­æ‰‹æœºåœ°ä¸‹åŸ</title>
    <style>
        body {
            font-family: "Comic Sans MS", cursive;
            background: #FFECF5;
            margin: 0;
            padding: 10px;
        }
        #chat-box {
            height: 60vh;
            border: 3px wavy #FF99CC;
            overflow-y: scroll;
            padding: 10px;
            background: white;
            margin-bottom: 10px;
            border-radius: 15px;
        }
        .msg {
            margin: 5px;
            padding: 8px 12px;
            border-radius: 15px;
            max-width: 70%;
            word-wrap: break-word;
        }
        .self {
            background: #DCF8C6;
            margin-left: auto;
        }
        .other {
            background: #ECECEC;
        }
        #input-area {
            display: flex;
            gap: 5px;
        }
        #message {
            flex: 1;
            padding: 10px;
            border: 2px solid #66CCFF;
            border-radius: 20px;
        }
        button {
            background: #FF9966;
            border: none;
            padding: 0 15px;
            border-radius: 20px;
            color: white;
        }
        .warning {
            color: #FF3333;
            font-size: 12px;
            text-align: center;
            margin-top: 5px;
        }
    </style>
    
    <!-- Firebase é­”æ³•ä»£ç  -->
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
    <script>
        // ä½ çš„Firebaseé…ç½®ï¼ˆè‡ªå·±ç”³è¯·å…è´¹çš„ï¼ï¼‰
        const firebaseConfig = {
            apiKey: "YOUR_API_KEY",
            authDomain: "YOUR_PROJECT.firebaseapp.com",
            databaseURL: "https://YOUR_PROJECT.firebaseio.com",
            projectId: "YOUR_PROJECT",
            storageBucket: "YOUR_PROJECT.appspot.com",
            messagingSenderId: "YOUR_SENDER_ID",
            appId: "YOUR_APP_ID"
        };
        firebase.initializeApp(firebaseConfig);
    </script>
</head>
<body>
    <h2 style="text-align:center;">ğŸ¬ 5.1ç­è¾£æ¡é€šè®¯ç¤¾</h2>
    
    <div id="chat-box"></div>
    
    <div id="input-area">
        <input type="text" id="message" placeholder="è¯´ç‚¹åŠ²çˆ†çš„ï¼">
        <button onclick="sendMessage()">ğŸ’¥</button>
    </div>
    
    <p class="warning">âš ï¸ é•¿æŒ‰æ¶ˆæ¯å¯ä»¥åˆ é™¤ï¼ˆä»…é™è‡ªå·±å‘çš„ï¼‰</p>
    
    <script>
        const db = firebase.database();
        const chatRef = db.ref('chats');
        let username = "åŒ¿å"+Math.floor(Math.random()*1000);
        
        // åŠ è½½å†å²æ¶ˆæ¯
        chatRef.limitToLast(50).on('child_added', (snapshot) => {
            const data = snapshot.val();
            addMessage(data.text, data.sender, snapshot.key);
        });
        
        // å‘æ¶ˆæ¯
        function sendMessage() {
            const msg = document.getElementById("message").value.trim();
            if(msg) {
                chatRef.push({
                    text: filterMessage(msg),
                    sender: username,
                    timestamp: firebase.database.ServerValue.TIMESTAMP
                });
                document.getElementById("message").value = "";
            }
        }
        
        // è¿‡æ»¤è¿ç¦è¯
        function filterMessage(msg) {
            const badWords = ["ä½œä¸š", "å‘Šè€å¸ˆ", "æ•°å­¦"];
            badWords.forEach(word => {
                if(msg.includes(word)) {
                    msg = msg.replace(word, "ğŸ¶".repeat(word.length));
                    alert(`æ£€æµ‹åˆ°å±é™©è¯ã€Œ${word}ã€ï¼å·²è‡ªåŠ¨ç‹—åŒ–ï¼`);
                }
            });
            return msg;
        }
        
        // æ˜¾ç¤ºæ¶ˆæ¯
        function addMessage(msg, sender, msgId) {
            const chatBox = document.getElementById("chat-box");
            const msgDiv = document.createElement("div");
            
            msgDiv.className = sender === username ? "msg self" : "msg other";
            msgDiv.textContent = msg;
            
            // é•¿æŒ‰åˆ é™¤
            if(sender === username) {
                msgDiv.addEventListener('longpress', () => {
                    if(confirm("è¦æ¯ç­è¿™æ¡çŠ¯ç½ªè¯æ®å—ï¼Ÿ")) {
                        db.ref('chats/'+msgId).remove();
                    }
                });
            }
            
            chatBox.appendChild(msgDiv);
            chatBox.scrollTop = chatBox.scrollHeight;
        }
        
        // é•¿æŒ‰æ£€æµ‹
        let timer;
        document.addEventListener('touchstart', (e) => {
            if(e.target.className.includes('self')) {
                timer = setTimeout(() => {
                    e.target.style.backgroundColor = "#FF9999";
                    if(confirm("è¦åˆ é™¤è¿™æ¡æ¶ˆæ¯å—ï¼Ÿ")) {
                        const msgId = e.target.dataset.id;
                        db.ref('chats/'+msgId).remove();
                    }
                }, 1000);
            }
        }, {passive: true});
        
        document.addEventListener('touchend', () => clearTimeout(timer));
        
        // è®¾ç½®ç”¨æˆ·å
        username = prompt("ç»™è‡ªå·±å–ä¸ªä»£å·ï¼", username) || username;
    </script>
</body>
</html>
Â 
